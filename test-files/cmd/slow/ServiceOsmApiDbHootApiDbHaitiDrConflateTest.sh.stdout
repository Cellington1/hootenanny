reference dataset:  test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/haiti-and-domrep-latest-cropped.osm
secondary dataset:  test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/PapMgcpClip-cropped.osm
AOI:  -72.4822997917,18.5264918926,-72.4768066276,18.531700324028872
TEST_NAME:  ServiceOsmApiDbHootApiDbHaitiDrConflateTest

STEP 1: Cleaning out the osm api db and initializing it for use...

 setval 
--------
      1
(1 row)


STEP 2: Writing the complete reference dataset to the osm api db...

18:55:11.736 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  85) Converting test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.osm to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:55:11.747 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.osm...
18:55:11.835 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (250651104) in relation (52900).
18:55:11.835 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (250651104) in relation (53432).
18:55:11.835 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (315342451) in relation (307828).
18:55:11.835 WARN  .../hoot/core/io/OsmXmlReader.cpp( 556) hoot::OsmXmlReader: Reached the maximum number of allowed warning messages for this class set by the setting log.warn.message.limit.  Silencing additional warning messages for this class...
18:55:11.877 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:55:12.073 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 771) Streaming elements from input to file outputs.  (data pass #1 of 3)...
18:55:12.193 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1384) Found unresolved relation member ref!:
18:55:12.193 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1387) Relation ID 1244309 (DB ID=81) has ref to Entry: role: tributary, eid: Relation:1244310
18:55:12.194 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1384) Found unresolved relation member ref!:
18:55:12.194 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1387) Relation ID 1244309 (DB ID=81) has ref to Entry: role: tributary, eid: Relation:1244336
18:55:12.202 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1384) Found unresolved relation member ref!:
18:55:12.202 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1387) Relation ID 1240526 (DB ID=113) has ref to Entry: role: tributary, eid: Relation:1241599
18:55:12.204 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1391) hoot::OsmApiDbBulkWriter: Reached the maximum number of allowed warning messages for this class set by the setting log.warn.message.limit.  Silencing additional warning messages for this class...
18:55:12.213 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 351) Input records parsed (data pass #1 of 3).  Time elapsed: 00:00
18:55:12.219 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 730) Writing sequence ID updates to database to reserve record IDs...
18:55:12.226 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 482) Writing combined SQL output file to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.sql.  (data pass #2 of 3)...
18:55:12.380 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 621) SQL file write complete.  (data pass #2 of 3).  Time elapsed: 00:00
18:55:12.380 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 398) File write stats:
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Nodes: 3,821
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Node tags: 97
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Ways: 377
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Way nodes: 4,336
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Way tags: 1,229
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Relations: 657
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Relation members: 52
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Relation tags: 3,261
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Unresolved relation members: 0
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Changesets: 1
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Changeset change size (each): 50,000
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Executable SQL records: 27,661
18:55:12.381 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 429) Executing element SQL for 27,661 records (data pass #3 of 3).  17 separate SQL COPY statements will be executed...
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 436) SQL execution complete.  Time elapsed: 00:00
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 404) Final database write stats:
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Nodes: 3,821
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Node tags: 97
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Ways: 377
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Way nodes: 4,336
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Way tags: 1,229
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Relations: 657
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Relation members: 52
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Relation tags: 3,261
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Unresolved relation members: 0
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Changesets: 1
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Changeset change size (each): 50,000
18:55:13.306 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 279) 	Executable SQL records: 27,661

STEP 5: Writing the complete secondary dataset to the hoot api db...

18:55:14.055 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  85) Converting test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/5-secondary-raw-complete.osm to hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
18:55:14.065 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/5-secondary-raw-complete.osm...
18:55:14.076 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...

STEP 8: Conflating the two datasets over the specified AOI...

18:55:14.884 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 120) Conflating osmapidb://hoot:hoottest@localhost:5432/osmapi_test with hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing the output to hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest
18:55:14.887 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:55:14.994 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
18:55:15.149 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 163) Applying pre-conflation operations...
18:55:15.149 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::BuildingOutlineRemoveOp
18:55:15.149 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::MapCleaner
18:55:15.150 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::ReprojectToPlanarOp
Reprojecting 0 / 228         
18:55:15.185 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DuplicateWayRemover
18:55:15.193 INFO  ...hoot/core/schema/OsmSchema.cpp(1851) Loading translation files...
18:55:15.341 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SuperfluousWayRemover
18:55:15.341 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::IntersectionSplitter
18:55:15.342 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::UnlikelyIntersectionRemover
18:55:15.342 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DualWaySplitter
18:55:15.343 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::ImpliedDividedMarker
18:55:15.343 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DuplicateNameRemover
18:55:15.344 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SmallWayMerger
18:55:15.345 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveEmptyAreasVisitor
18:55:15.345 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveDuplicateAreaVisitor
18:55:15.346 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::NoInformationElementRemover
18:55:15.404 INFO  ...conflate/UnifyingConflator.cpp( 124) Applying pre-unifying conflation operations...
18:55:15.405 INFO  ...lygon/BuildingMatchCreator.cpp( 252) Creating matches with: hoot::BuildingMatchCreator...
18:55:15.913 INFO  ...late/js/ScriptMatchCreator.cpp( 458) Creating matches with: hoot::ScriptMatchCreator; rules: PoiGeneric.js...
18:55:15.921 INFO  ...ighway/HighwayMatchCreator.cpp( 274) Creating matches with: hoot::HighwayMatchCreator...
18:55:17.860 INFO  .../hoot/rules/LinearWaterway.js"(  33) "Calculating search radius for waterway conflation..."
18:55:17.862 INFO  ...ate/SearchRadiusCalculator.cpp( 149) Unable to automatically calculate search radius.  Not enough tie points.  Using default search radius value = 15
18:55:17.863 INFO  ...late/js/ScriptMatchCreator.cpp( 458) Creating matches with: hoot::ScriptMatchCreator; rules: LinearWaterway.js...
18:55:17.865 INFO  ...gon/PoiPolygonMatchCreator.cpp( 345) Creating matches with: hoot::PoiPolygonMatchCreator...
18:55:17.873 INFO  .../OptimalConstrainedMatches.cpp(  55) Calculating optimal match conflicts...
18:55:17.873 INFO  ...h/GreedyConstrainedMatches.cpp(  68) Calculating greedy match conflicts...
18:55:17.873 INFO  ...conflate/UnifyingConflator.cpp( 226) Match count: 1
18:55:17.873 INFO  ...conflate/UnifyingConflator.cpp( 243) Creating mergers...
18:55:17.874 INFO  ...conflate/UnifyingConflator.cpp( 260) Applying 1 mergers...
18:55:17.902 INFO  ...conflate/UnifyingConflator.cpp( 292) Applying post-unifying conflation operations...
18:55:17.902 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SuperfluousNodeRemover
Reprojecting 0 / 160         
18:55:17.903 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SmallWayMerger
18:55:17.903 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 189) Applying post-conflation operations...
18:55:17.903 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveMissingElementsVisitor
18:55:17.904 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveInvalidReviewRelationsVisitor
18:55:17.904 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::RemoveDuplicateReviewsOp
18:55:17.904 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::BuildingOutlineUpdateOp
18:55:17.904 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveInvalidMultilineStringMembersVisitor
18:55:17.905 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::AddHilbertReviewSortOrderOp
Reprojecting 0 / 158         
18:55:17.906 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
18:55:18.104 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 248) Conflation job completed.

STEP 11: Writing a SQL changeset file that is the difference between the cropped reference input dataset specified AOI and the conflated output specified AOI...

18:55:18.769 INFO  ...ore/cmd/DeriveChangesetCmd.cpp( 107) Deriving changeset for inputs osmapidb://hoot:hoottest@localhost:5432/osmapi_test, hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing output to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/11-conflated-changeset-ToBeAppliedToOsmApiDb.osc.sql...
18:55:18.772 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:55:18.923 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...

STEP 12: Writing an XML changeset file that is the difference between the cropped reference input dataset specified AOI and the conflated output specified AOI (will not be applied to the database)...

18:55:19.608 INFO  ...ore/cmd/DeriveChangesetCmd.cpp( 107) Deriving changeset for inputs osmapidb://hoot:hoottest@localhost:5432/osmapi_test, hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing output to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/12-conflated-changeset-ToBeAppliedToOsmApiDb.osc...
18:55:19.610 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:55:19.706 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
18:55:19.782 INFO  .../OsmChangesetXmlFileWriter.cpp(  74) Writing changeset to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/12-conflated-changeset-ToBeAppliedToOsmApiDb.osc

STEP 13: Executing the changeset SQL on the osm api db...

18:55:20.419 INFO  ...core/cmd/ApplyChangesetCmd.cpp(  60) Applying changeset test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/11-conflated-changeset-ToBeAppliedToOsmApiDb.osc.sql to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
Changeset(s) Created: 1
Changeset Details: min_lat=18.527401, max_lat=18.538810, min_lon=-72.480594, max_lon=-72.475766, num_changes=72
Node(s) Created: 67
Node(s) Modified: 0
Node(s) Deleted: 0
Way(s) Created: 4
Way(s) Modified: 1
Way(s) Deleted: 0
Relation(s) Created: 0
Relation(s) Modified: 0
Relation(s) Deleted: 0

STEP 15: Reading the entire contents of the osm api db, writing it into a file, and verifying the data...

18:55:21.279 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  85) Converting osmapidb://hoot:hoottest@localhost:5432/osmapi_test to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/15-complete-output-PulledFromOsmApiDb.osm...
18:55:21.286 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:55:21.309 INFO  ...oot/core/io/OsmApiDbReader.cpp( 108) Executing OSM API read query...
18:55:22.956 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/15-complete-output-PulledFromOsmApiDb.osm...
18:55:23.708 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/output.osm...
18:55:23.862 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/15-complete-output-PulledFromOsmApiDb.osm...

STEP 16: Verifying the SQL changeset...


STEP 17: Verifying the XML changeset...

