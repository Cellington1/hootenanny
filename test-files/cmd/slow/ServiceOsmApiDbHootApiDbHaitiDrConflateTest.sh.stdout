reference dataset:  test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/haiti-and-domrep-latest-cropped.osm
secondary dataset:  test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/PapMgcpClip-cropped.osm
AOI:  -72.4822997917,18.5264918926,-72.4768066276,18.531700324028872
TEST_NAME:  ServiceOsmApiDbHootApiDbHaitiDrConflateTest

STEP 1: Cleaning out the osm api db and initializing it for use...

 setval 
--------
      1
(1 row)


STEP 2: Writing the complete reference dataset to the osm api db...

18:09:47.742 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  87) Converting test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.osm to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:09:47.742 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.osm...
18:09:47.812 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (250651104) in relation (52900).
18:09:47.812 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (250651104) in relation (53432).
18:09:47.812 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (315342451) in relation (307828).
18:09:47.812 WARN  .../hoot/core/io/OsmXmlReader.cpp( 556) hoot::OsmXmlReader: Reached the maximum number of allowed warning messages for this class set by the setting log.warn.message.limit.  Silencing additional warning messages for this class...
18:09:47.847 INFO  ...ore/io/OsmMapWriterFactory.cpp( 108) Writing map to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:09:47.930 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 772) Streaming elements from input to file outputs.  (data pass #1 of 3)...
18:09:48.029 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1385) Found unresolved relation member ref!:
18:09:48.029 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1388) Relation ID 1244309 (DB ID=81) has ref to Entry: role: tributary, eid: Relation:1244310
18:09:48.029 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1385) Found unresolved relation member ref!:
18:09:48.029 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1388) Relation ID 1244309 (DB ID=81) has ref to Entry: role: tributary, eid: Relation:1244336
18:09:48.039 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1385) Found unresolved relation member ref!:
18:09:48.039 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1388) Relation ID 1240526 (DB ID=113) has ref to Entry: role: tributary, eid: Relation:1241599
18:09:48.041 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1392) hoot::OsmApiDbBulkWriter: Reached the maximum number of allowed warning messages for this class set by the setting log.warn.message.limit.  Silencing additional warning messages for this class...
18:09:48.053 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 352) Input records parsed (data pass #1 of 3).  Time elapsed: 00:00
18:09:48.059 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 731) Writing sequence ID updates to database to reserve record IDs...
18:09:48.062 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 483) Writing combined SQL output file to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.sql.  (data pass #2 of 3)...
18:09:48.154 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 622) SQL file write complete.  (data pass #2 of 3).  Time elapsed: 00:00
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 399) File write stats:
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Nodes: 3,821
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Node tags: 135
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Ways: 377
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Way nodes: 4,336
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Way tags: 1,606
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Relations: 657
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Relation members: 52
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Relation tags: 4,559
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Unresolved relation members: 0
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Changesets: 1
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Changeset change size (each): 50,000
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Executable SQL records: 31,087
18:09:48.155 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 430) Executing element SQL for 31,087 records (data pass #3 of 3).  17 separate SQL COPY statements will be executed...
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 437) SQL execution complete.  Time elapsed: 00:00
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 405) Final database write stats:
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Nodes: 3,821
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Node tags: 135
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Ways: 377
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Way nodes: 4,336
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Way tags: 1,606
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Relations: 657
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Relation members: 52
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Relation tags: 4,559
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Unresolved relation members: 0
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Changesets: 1
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Changeset change size (each): 50,000
18:09:48.929 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 280) 	Executable SQL records: 31,087

STEP 5: Writing the complete secondary dataset to the hoot api db...

18:09:49.074 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  87) Converting test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/5-secondary-raw-complete.osm to hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
18:09:49.077 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/5-secondary-raw-complete.osm...
18:09:49.084 INFO  ...ore/io/OsmMapWriterFactory.cpp( 108) Writing map to hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...

STEP 8: Conflating the two datasets over the specified AOI...

18:09:49.426 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 121) Conflating osmapidb://hoot:hoottest@localhost:5432/osmapi_test with hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing the output to hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest
18:09:49.427 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:09:49.515 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
18:09:49.667 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 164) Applying pre-conflation operations...
18:09:49.667 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::BuildingOutlineRemoveOp
18:09:49.667 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::MapCleaner
18:09:49.668 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::ReprojectToPlanarOp
Reprojecting 0 / 228         
18:09:49.700 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DuplicateWayRemover
18:09:49.700 INFO  ...hoot/core/schema/OsmSchema.cpp(1851) Loading translation files...
18:09:49.769 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SuperfluousWayRemover
18:09:49.769 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::IntersectionSplitter
18:09:49.769 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::UnlikelyIntersectionRemover
18:09:49.769 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DualWaySplitter
18:09:49.770 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::ImpliedDividedMarker
18:09:49.770 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DuplicateNameRemover
18:09:49.770 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SmallWayMerger
18:09:49.770 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveEmptyAreasVisitor
18:09:49.771 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveDuplicateAreaVisitor
18:09:49.771 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::NoInformationElementRemover
18:09:49.807 INFO  ...conflate/UnifyingConflator.cpp( 126) Applying pre-unifying conflation operations...
18:09:49.808 INFO  ...lygon/BuildingMatchCreator.cpp( 255) Creating matches with: hoot::BuildingMatchCreator...
18:09:50.256 INFO  ...late/js/ScriptMatchCreator.cpp( 463) Creating matches with: hoot::ScriptMatchCreator; rules: PoiGeneric.js...
18:09:50.263 INFO  ...ighway/HighwayMatchCreator.cpp( 276) Creating matches with: hoot::HighwayMatchCreator...
18:09:51.883 INFO  .../hoot/rules/LinearWaterway.js"(  33) "Calculating search radius for waterway conflation..."
18:09:51.889 INFO  ...ate/SearchRadiusCalculator.cpp( 151) Unable to automatically calculate search radius.  Not enough tie points.  Using default search radius value = 15
18:09:51.889 INFO  ...late/js/ScriptMatchCreator.cpp( 463) Creating matches with: hoot::ScriptMatchCreator; rules: LinearWaterway.js...
18:09:51.892 INFO  ...gon/PoiPolygonMatchCreator.cpp( 347) Creating matches with: hoot::PoiPolygonMatchCreator...
18:09:51.897 INFO  .../OptimalConstrainedMatches.cpp(  57) Calculating optimal match conflicts...
18:09:51.897 INFO  ...h/GreedyConstrainedMatches.cpp(  70) Calculating greedy match conflicts...
18:09:51.897 INFO  ...conflate/UnifyingConflator.cpp( 228) Match count: 1
18:09:51.897 INFO  ...conflate/UnifyingConflator.cpp( 245) Creating mergers...
18:09:51.897 INFO  ...conflate/UnifyingConflator.cpp( 262) Applying 1 mergers...
18:09:51.923 INFO  ...conflate/UnifyingConflator.cpp( 294) Applying post-unifying conflation operations...
18:09:51.923 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SuperfluousNodeRemover
Reprojecting 0 / 160         
18:09:51.924 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SmallWayMerger
18:09:51.925 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 190) Applying post-conflation operations...
18:09:51.925 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveMissingElementsVisitor
18:09:51.925 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveInvalidReviewRelationsVisitor
18:09:51.925 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::RemoveDuplicateReviewsOp
18:09:51.925 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::BuildingOutlineUpdateOp
18:09:51.925 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveInvalidMultilineStringMembersVisitor
18:09:51.925 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::AddHilbertReviewSortOrderOp
Reprojecting 0 / 158         
18:09:51.926 INFO  ...ore/io/OsmMapWriterFactory.cpp( 108) Writing map to hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
18:09:52.106 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 249) Conflation job completed.

STEP 11: Writing a SQL changeset file that is the difference between the cropped reference input dataset specified AOI and the conflated output specified AOI...

18:09:52.279 INFO  ...ore/cmd/DeriveChangesetCmd.cpp( 109) Deriving changeset for inputs osmapidb://hoot:hoottest@localhost:5432/osmapi_test, hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing output to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/11-conflated-changeset-ToBeAppliedToOsmApiDb.osc.sql...
18:09:52.280 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:09:52.380 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...

STEP 12: Writing an XML changeset file that is the difference between the cropped reference input dataset specified AOI and the conflated output specified AOI (will not be applied to the database)...

18:09:52.622 INFO  ...ore/cmd/DeriveChangesetCmd.cpp( 109) Deriving changeset for inputs osmapidb://hoot:hoottest@localhost:5432/osmapi_test, hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing output to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/12-conflated-changeset-ToBeAppliedToOsmApiDb.osc...
18:09:52.623 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:09:52.791 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
18:09:52.867 INFO  .../OsmChangesetXmlFileWriter.cpp(  90) Writing changeset to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/12-conflated-changeset-ToBeAppliedToOsmApiDb.osc

STEP 13: Executing the changeset SQL on the osm api db...

18:09:53.011 INFO  ...core/cmd/ApplyChangesetCmd.cpp(  62) Applying changeset test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/11-conflated-changeset-ToBeAppliedToOsmApiDb.osc.sql to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
Changeset(s) Created: 1
Changeset Details: min_lat=18.527401, max_lat=18.538810, min_lon=-72.480594, max_lon=-72.475766, num_changes=72
Node(s) Created: 67
Node(s) Modified: 0
Node(s) Deleted: 0
Way(s) Created: 4
Way(s) Modified: 1
Way(s) Deleted: 0
Relation(s) Created: 0
Relation(s) Modified: 0
Relation(s) Deleted: 0

STEP 15: Reading the entire contents of the osm api db, writing it into a file, and verifying the data...

18:09:53.282 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  87) Converting osmapidb://hoot:hoottest@localhost:5432/osmapi_test to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/15-complete-output-PulledFromOsmApiDb.osm...
18:09:53.284 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
18:09:53.309 INFO  ...oot/core/io/OsmApiDbReader.cpp( 111) Executing OSM API read query...
18:09:55.193 INFO  ...ore/io/OsmMapWriterFactory.cpp( 108) Writing map to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/15-complete-output-PulledFromOsmApiDb.osm...
18:09:55.418 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/output.osm...
18:09:55.547 INFO  ...ore/io/OsmMapReaderFactory.cpp( 137) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/15-complete-output-PulledFromOsmApiDb.osm...

STEP 16: Verifying the SQL changeset...


STEP 17: Verifying the XML changeset...

