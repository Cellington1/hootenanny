reference dataset:  test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/haiti-and-domrep-latest-cropped.osm
secondary dataset:  test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/PapMgcpClip-cropped.osm
AOI:  -72.4822997917,18.5264918926,-72.4768066276,18.531700324028872
TEST_NAME:  ServiceOsmApiDbHootApiDbHaitiDrConflateTest

STEP 1: Cleaning out the osm api db and initializing it for use...

 setval 
--------
      1
(1 row)


STEP 2: Writing the complete reference dataset to the osm api db...

19:46:45.732 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  85) Converting test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.osm to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
19:46:45.741 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.osm...
19:46:45.820 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (250651104) in relation (52900).
19:46:45.820 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (250651104) in relation (53432).
19:46:45.820 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (315342451) in relation (307828).
19:46:45.820 WARN  .../hoot/core/io/OsmXmlReader.cpp( 556) hoot::OsmXmlReader: Reached the maximum number of allowed warning messages for this class set by the setting log.warn.message.limit.  Silencing additional warning messages for this class...
19:46:45.868 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
19:46:46.028 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 770) Streaming elements from input to file outputs.  (data pass #1 of 3)...
19:46:46.120 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1383) Found unresolved relation member ref!:
19:46:46.120 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1386) Relation ID 1244309 (DB ID=81) has ref to Entry: role: tributary, eid: Relation:1244310
19:46:46.121 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1383) Found unresolved relation member ref!:
19:46:46.121 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1386) Relation ID 1244309 (DB ID=81) has ref to Entry: role: tributary, eid: Relation:1244336
19:46:46.131 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1383) Found unresolved relation member ref!:
19:46:46.131 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1386) Relation ID 1240526 (DB ID=113) has ref to Entry: role: tributary, eid: Relation:1241599
19:46:46.133 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1390) hoot::OsmApiDbBulkWriter: Reached the maximum number of allowed warning messages for this class set by the setting log.warn.message.limit.  Silencing additional warning messages for this class...
19:46:46.143 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 350) Input records parsed (data pass #1 of 3).  Time elapsed: 00:00
19:46:46.152 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 729) Writing sequence ID updates to database to reserve record IDs...
19:46:46.157 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 481) Writing combined SQL output file to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.sql.  (data pass #2 of 3)...
19:46:46.310 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 620) SQL file write complete.  (data pass #2 of 3).  Time elapsed: 00:00
19:46:46.310 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 397) File write stats:
19:46:46.310 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Nodes: 3,821
19:46:46.310 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Node tags: 135
19:46:46.310 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Ways: 377
19:46:46.310 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Way nodes: 4,336
19:46:46.310 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Way tags: 1,606
19:46:46.310 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relations: 657
19:46:46.310 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relation members: 52
19:46:46.311 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relation tags: 4,559
19:46:46.311 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Unresolved relation members: 0
19:46:46.311 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Changesets: 1
19:46:46.311 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Changeset change size (each): 50,000
19:46:46.311 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Executable SQL records: 31,087
19:46:46.311 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 428) Executing element SQL for 31,087 records (data pass #3 of 3).  17 separate SQL COPY statements will be executed...
BEGIN
COPY 1
COPY 3821
COPY 135
COPY 3821
COPY 135
COPY 377
COPY 4336
COPY 1606
COPY 377
COPY 4336
COPY 1606
COPY 657
COPY 26
COPY 4559
COPY 657
COPY 26
COPY 4559
COMMIT
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 435) SQL execution complete.  Time elapsed: 00:00
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 403) Final database write stats:
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Nodes: 3,821
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Node tags: 135
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Ways: 377
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Way nodes: 4,336
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Way tags: 1,606
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relations: 657
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relation members: 52
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relation tags: 4,559
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Unresolved relation members: 0
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Changesets: 1
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Changeset change size (each): 50,000
19:46:47.267 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Executable SQL records: 31,087

STEP 5: Writing the complete secondary dataset to the hoot api db...

19:46:47.919 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  85) Converting test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/5-secondary-raw-complete.osm to hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
19:46:47.928 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/5-secondary-raw-complete.osm...
19:46:47.942 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...

STEP 8: Conflating the two datasets over the specified AOI...

19:46:48.814 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 120) Conflating osmapidb://hoot:hoottest@localhost:5432/osmapi_test with hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing the output to hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest
19:46:48.816 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
19:46:48.922 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
19:46:49.004 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 163) Applying pre-conflation operations...
19:46:49.005 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::BuildingOutlineRemoveOp
19:46:49.005 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::MapCleaner
19:46:49.005 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::ReprojectToPlanarOp
Reprojecting 0 / 228         
19:46:49.040 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DuplicateWayRemover
19:46:49.050 INFO  ...hoot/core/schema/OsmSchema.cpp(1851) Loading translation files...
19:46:49.197 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SuperfluousWayRemover
19:46:49.197 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::IntersectionSplitter
19:46:49.198 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::UnlikelyIntersectionRemover
19:46:49.198 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DualWaySplitter
19:46:49.199 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::ImpliedDividedMarker
19:46:49.199 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DuplicateNameRemover
19:46:49.199 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SmallWayMerger
19:46:49.200 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveEmptyAreasVisitor
19:46:49.201 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveDuplicateAreaVisitor
19:46:49.201 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::NoInformationElementRemover
19:46:49.251 INFO  ...conflate/UnifyingConflator.cpp( 124) Applying pre-unifying conflation operations...
19:46:49.252 INFO  ...lygon/BuildingMatchCreator.cpp( 252) Creating matches with: hoot::BuildingMatchCreator...
19:46:49.739 INFO  ...late/js/ScriptMatchCreator.cpp( 458) Creating matches with: hoot::ScriptMatchCreator; rules: PoiGeneric.js...
19:46:49.747 INFO  ...ighway/HighwayMatchCreator.cpp( 274) Creating matches with: hoot::HighwayMatchCreator...
19:46:51.620 INFO  .../hoot/rules/LinearWaterway.js"(  33) "Calculating search radius for waterway conflation..."
19:46:51.623 INFO  ...ate/SearchRadiusCalculator.cpp( 149) Unable to automatically calculate search radius.  Not enough tie points.  Using default search radius value = 15
19:46:51.623 INFO  ...late/js/ScriptMatchCreator.cpp( 458) Creating matches with: hoot::ScriptMatchCreator; rules: LinearWaterway.js...
19:46:51.630 INFO  ...gon/PoiPolygonMatchCreator.cpp( 345) Creating matches with: hoot::PoiPolygonMatchCreator...
19:46:51.635 INFO  .../OptimalConstrainedMatches.cpp(  55) Calculating optimal match conflicts...
19:46:51.635 INFO  ...h/GreedyConstrainedMatches.cpp(  68) Calculating greedy match conflicts...
19:46:51.635 INFO  ...conflate/UnifyingConflator.cpp( 226) Match count: 1
19:46:51.635 INFO  ...conflate/UnifyingConflator.cpp( 243) Creating mergers...
19:46:51.637 INFO  ...conflate/UnifyingConflator.cpp( 260) Applying 1 mergers...
19:46:51.665 INFO  ...conflate/UnifyingConflator.cpp( 292) Applying post-unifying conflation operations...
19:46:51.665 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SuperfluousNodeRemover
Reprojecting 0 / 160         
19:46:51.666 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SmallWayMerger
19:46:51.666 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 189) Applying post-conflation operations...
19:46:51.666 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveMissingElementsVisitor
19:46:51.667 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveInvalidReviewRelationsVisitor
19:46:51.667 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::RemoveDuplicateReviewsOp
19:46:51.667 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::BuildingOutlineUpdateOp
19:46:51.668 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveInvalidMultilineStringMembersVisitor
19:46:51.668 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::AddHilbertReviewSortOrderOp
Reprojecting 0 / 158         
19:46:51.669 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
19:46:51.853 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 248) Conflation job completed.

STEP 11: Writing a SQL changeset file that is the difference between the cropped reference input dataset specified AOI and the conflated output specified AOI...

19:46:52.482 INFO  ...ore/cmd/DeriveChangesetCmd.cpp( 101) Deriving changeset for inputs osmapidb://hoot:hoottest@localhost:5432/osmapi_test, hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing output to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/11-conflated-changeset-ToBeAppliedToOsmApiDb.osc.sql...
19:46:52.484 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
19:46:52.594 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...

STEP 12: Executing the changeset SQL on the osm api db...

19:46:53.275 INFO  ...core/cmd/ApplyChangesetCmd.cpp(  60) Applying changeset test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/11-conflated-changeset-ToBeAppliedToOsmApiDb.osc.sql to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
Changeset(s) Created: 1
Changeset Details: min_lat=18.524121, max_lat=18.533495, min_lon=-72.480768, max_lon=-72.475888, num_changes=96
Node(s) Created: 2
Node(s) Modified: 75
Node(s) Deleted: 16
Way(s) Created: 2
Way(s) Modified: 1
Way(s) Deleted: 0
Relation(s) Created: 0
Relation(s) Modified: 0
Relation(s) Deleted: 0

STEP 14: Reading the entire contents of the osm api db, writing it into a file, and verifying it...

19:46:53.952 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  85) Converting osmapidb://hoot:hoottest@localhost:5432/osmapi_test to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/14-complete-output-PulledFromOsmApiDb.osm...
19:46:53.959 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
19:46:53.988 INFO  ...oot/core/io/OsmApiDbReader.cpp( 105) Executing OSM API read query...
19:46:55.558 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/14-complete-output-PulledFromOsmApiDb.osm...
19:46:56.344 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/output.osm...
19:46:56.570 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/14-complete-output-PulledFromOsmApiDb.osm...
