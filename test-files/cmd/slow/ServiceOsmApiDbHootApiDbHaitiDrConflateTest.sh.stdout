reference dataset:  test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/haiti-and-domrep-latest-cropped.osm
secondary dataset:  test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/PapMgcpClip-cropped.osm
AOI:  -72.4822997917,18.5264918926,-72.4768066276,18.531700324028872
TEST_NAME:  ServiceOsmApiDbHootApiDbHaitiDrConflateTest

STEP 1: Cleaning out the osm api db and initializing it for use...

 setval 
--------
      1
(1 row)


STEP 2: Writing the complete reference dataset to the osm api db...

17:47:22.432 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  85) Converting test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.osm to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
17:47:22.441 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.osm...
17:47:22.516 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (250651104) in relation (52900).
17:47:22.516 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (250651104) in relation (53432).
17:47:22.516 WARN  .../hoot/core/io/OsmXmlReader.cpp( 552) Missing node (315342451) in relation (307828).
17:47:22.516 WARN  .../hoot/core/io/OsmXmlReader.cpp( 556) hoot::OsmXmlReader: Reached the maximum number of allowed warning messages for this class set by the setting log.warn.message.limit.  Silencing additional warning messages for this class...
17:47:22.559 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
17:47:22.827 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 770) Streaming elements from input to file outputs.  (data pass #1 of 3)...
17:47:22.922 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1383) Found unresolved relation member ref!:
17:47:22.923 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1386) Relation ID 1244309 (DB ID=81) has ref to Entry: role: tributary, eid: Relation:1244310
17:47:22.923 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1383) Found unresolved relation member ref!:
17:47:22.923 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1386) Relation ID 1244309 (DB ID=81) has ref to Entry: role: tributary, eid: Relation:1244336
17:47:22.933 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1383) Found unresolved relation member ref!:
17:47:22.933 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1386) Relation ID 1240526 (DB ID=113) has ref to Entry: role: tributary, eid: Relation:1241599
17:47:22.935 WARN  ...core/io/OsmApiDbBulkWriter.cpp(1390) hoot::OsmApiDbBulkWriter: Reached the maximum number of allowed warning messages for this class set by the setting log.warn.message.limit.  Silencing additional warning messages for this class...
17:47:22.945 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 350) Input records parsed (data pass #1 of 3).  Time elapsed: 00:00
17:47:22.954 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 729) Writing sequence ID updates to database to reserve record IDs...
17:47:22.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 481) Writing combined SQL output file to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/2-ref-raw-complete.sql.  (data pass #2 of 3)...
17:47:23.108 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 620) SQL file write complete.  (data pass #2 of 3).  Time elapsed: 00:00
17:47:23.108 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 397) File write stats:
17:47:23.108 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Nodes: 3,821
17:47:23.108 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Node tags: 135
17:47:23.108 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Ways: 377
17:47:23.108 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Way nodes: 4,336
17:47:23.108 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Way tags: 1,606
17:47:23.109 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relations: 657
17:47:23.109 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relation members: 52
17:47:23.109 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relation tags: 4,559
17:47:23.109 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Unresolved relation members: 0
17:47:23.109 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Changesets: 1
17:47:23.109 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Changeset change size (each): 50,000
17:47:23.109 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Executable SQL records: 31,087
17:47:23.109 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 428) Executing element SQL for 31,087 records (data pass #3 of 3).  17 separate SQL COPY statements will be executed...
BEGIN
COPY 1
COPY 3821
COPY 135
COPY 3821
COPY 135
COPY 377
COPY 4336
COPY 1606
COPY 377
COPY 4336
COPY 1606
COPY 657
COPY 26
COPY 4559
COPY 657
COPY 26
COPY 4559
COMMIT
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 435) SQL execution complete.  Time elapsed: 00:00
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 403) Final database write stats:
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Nodes: 3,821
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Node tags: 135
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Ways: 377
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Way nodes: 4,336
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Way tags: 1,606
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relations: 657
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relation members: 52
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Relation tags: 4,559
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Unresolved relation members: 0
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Changesets: 1
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Changeset change size (each): 50,000
17:47:23.960 INFO  ...core/io/OsmApiDbBulkWriter.cpp( 278) 	Executable SQL records: 31,087

STEP 5: Writing the complete secondary dataset to the hoot api db...

17:47:24.571 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  85) Converting test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/5-secondary-raw-complete.osm to hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
17:47:24.580 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/5-secondary-raw-complete.osm...
17:47:24.591 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...

STEP 8: Conflating the two datasets over the specified AOI...

17:47:25.514 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 120) Conflating osmapidb://hoot:hoottest@localhost:5432/osmapi_test with hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing the output to hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest
17:47:25.515 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
17:47:25.592 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/5-secondary-complete-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
17:47:25.656 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 163) Applying pre-conflation operations...
17:47:25.657 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::BuildingOutlineRemoveOp
17:47:25.657 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::MapCleaner
17:47:25.658 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::ReprojectToPlanarOp
Reprojecting 0 / 228         
17:47:25.693 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DuplicateWayRemover
17:47:25.712 INFO  ...hoot/core/schema/OsmSchema.cpp(1851) Loading translation files...
17:47:25.988 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SuperfluousWayRemover
17:47:25.988 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::IntersectionSplitter
17:47:25.989 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::UnlikelyIntersectionRemover
17:47:25.989 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DualWaySplitter
17:47:25.991 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::ImpliedDividedMarker
17:47:25.991 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::DuplicateNameRemover
17:47:25.992 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SmallWayMerger
17:47:25.993 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveEmptyAreasVisitor
17:47:25.994 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveDuplicateAreaVisitor
17:47:25.994 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::NoInformationElementRemover
17:47:26.060 INFO  ...conflate/UnifyingConflator.cpp( 124) Applying pre-unifying conflation operations...
17:47:26.061 INFO  ...lygon/BuildingMatchCreator.cpp( 252) Creating matches with: hoot::BuildingMatchCreator...
17:47:26.571 INFO  ...late/js/ScriptMatchCreator.cpp( 458) Creating matches with: hoot::ScriptMatchCreator; rules: PoiGeneric.js...
17:47:26.580 INFO  ...ighway/HighwayMatchCreator.cpp( 274) Creating matches with: hoot::HighwayMatchCreator...
17:47:28.458 INFO  .../hoot/rules/LinearWaterway.js"(  33) "Calculating search radius for waterway conflation..."
17:47:28.462 INFO  ...ate/SearchRadiusCalculator.cpp( 149) Unable to automatically calculate search radius.  Not enough tie points.  Using default search radius value = 15
17:47:28.463 INFO  ...late/js/ScriptMatchCreator.cpp( 458) Creating matches with: hoot::ScriptMatchCreator; rules: LinearWaterway.js...
17:47:28.475 INFO  ...gon/PoiPolygonMatchCreator.cpp( 345) Creating matches with: hoot::PoiPolygonMatchCreator...
17:47:28.478 INFO  .../OptimalConstrainedMatches.cpp(  55) Calculating optimal match conflicts...
17:47:28.478 INFO  ...h/GreedyConstrainedMatches.cpp(  68) Calculating greedy match conflicts...
17:47:28.478 INFO  ...conflate/UnifyingConflator.cpp( 226) Match count: 1
17:47:28.478 INFO  ...conflate/UnifyingConflator.cpp( 243) Creating mergers...
17:47:28.480 INFO  ...conflate/UnifyingConflator.cpp( 260) Applying 1 mergers...
17:47:28.510 INFO  ...conflate/UnifyingConflator.cpp( 292) Applying post-unifying conflation operations...
17:47:28.510 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SuperfluousNodeRemover
Reprojecting 0 / 160         
17:47:28.511 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::SmallWayMerger
17:47:28.511 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 189) Applying post-conflation operations...
17:47:28.511 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveMissingElementsVisitor
17:47:28.511 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveInvalidReviewRelationsVisitor
17:47:28.512 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::RemoveDuplicateReviewsOp
17:47:28.512 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::BuildingOutlineUpdateOp
17:47:28.512 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  77) Applying visitor: hoot::RemoveInvalidMultilineStringMembersVisitor
17:47:28.513 INFO  .../cpp/hoot/core/ops/NamedOp.cpp(  57) Applying operation: hoot::AddHilbertReviewSortOrderOp
Reprojecting 0 / 158         
17:47:28.514 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...
17:47:28.702 INFO  .../hoot/core/cmd/ConflateCmd.cpp( 248) Conflation job completed.

STEP 11: Writing a SQL changeset file that is the difference between the cropped reference input dataset specified AOI and the conflated output specified AOI...

17:47:29.285 INFO  ...ore/cmd/DeriveChangesetCmd.cpp( 101) Deriving changeset for inputs osmapidb://hoot:hoottest@localhost:5432/osmapi_test, hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest and writing output to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/11-conflated-changeset-ToBeAppliedToOsmApiDb.osc.sql...
17:47:29.286 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
17:47:29.375 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from hootapidb://hoot:hoottest@localhost:5432/hoot/8-conflated-ServiceOsmApiDbHootApiDbHaitiDrConflateTest...

STEP 12: Executing the changeset SQL on the osm api db...

17:47:29.982 INFO  ...core/cmd/ApplyChangesetCmd.cpp(  60) Applying changeset test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/11-conflated-changeset-ToBeAppliedToOsmApiDb.osc.sql to osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
Changeset(s) Created: 1
Changeset Details: min_lat=18.524121, max_lat=18.533495, min_lon=-72.480768, max_lon=-72.475888, num_changes=96
Node(s) Created: 2
Node(s) Modified: 75
Node(s) Deleted: 16
Way(s) Created: 2
Way(s) Modified: 1
Way(s) Deleted: 0
Relation(s) Created: 0
Relation(s) Modified: 0
Relation(s) Deleted: 0

STEP 14: Reading the entire contents of the osm api db, writing it into a file, and verifying it...

17:47:30.710 INFO  ...p/hoot/core/cmd/ConvertCmd.cpp(  85) Converting osmapidb://hoot:hoottest@localhost:5432/osmapi_test to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/14-complete-output-PulledFromOsmApiDb.osm...
17:47:30.717 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from osmapidb://hoot:hoottest@localhost:5432/osmapi_test...
17:47:30.740 INFO  ...oot/core/io/OsmApiDbReader.cpp( 105) Executing OSM API read query...
17:47:32.260 INFO  ...ore/io/OsmMapWriterFactory.cpp( 106) Writing map to test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/14-complete-output-PulledFromOsmApiDb.osm...
17:47:32.996 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-files/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/output.osm...
17:47:33.152 INFO  ...ore/io/OsmMapReaderFactory.cpp( 135) Loading map from test-output/cmd/slow/ServiceOsmApiDbHootApiDbHaitiDrConflateTest/14-complete-output-PulledFromOsmApiDb.osm...
